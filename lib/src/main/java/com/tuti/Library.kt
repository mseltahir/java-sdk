/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package com.tuti

import com.google.gson.reflect.TypeToken
import com.tuti.api.TutiApiClient
import com.tuti.api.authentication.SignInRequest
import com.tuti.api.authentication.SignInResponse
import com.tuti.api.data.TutiResponse
import com.tuti.model.Beneficiary
import com.tuti.model.NoebsBeneficiary
import com.tuti.model.ben

object Library {
    var jwt: String? = null

    @JvmStatic
    fun main(args: Array<String>) {
        val client = TutiApiClient()
        client.isSingleThreaded = true
        val credentials = SignInRequest("0129751986", "Rami1111.")
        client.SignIn(
            credentials,
            { signInResponse: SignInResponse ->
                run {
                    println(signInResponse.user.mobileNumber)
                }
            },  { _: TutiResponse?, _: Exception? ->
            run {

            }

        })
        addBeneficiary()

    }
}

private fun addBeneficiary() {
    val tutiApiClient = TutiApiClient()
    tutiApiClient.authToken =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJtb2JpbGUiOiIwMTExNDkzODg1IiwiZXhwIjoxNjY3NDk4MDc1LCJpc3MiOiJub2VicyJ9.2YveVIAuCg6O4-PsxZJ4pclQJGNapdNlIUC0XaBmFrY"
    val beneficiary = Beneficiary(number = "0912222222", billType = 0, operator = 1)
    tutiApiClient.addBeneficiary(beneficiary, { signInResponse: TutiResponse? ->
        run { println(signInResponse) }
    }, { objectReceived: TutiResponse?, _: Exception? ->
        run {
            println(objectReceived.toString())
        }
    })

    var res = object : TypeToken<List<NoebsBeneficiary>>() {}.type
    tutiApiClient.getBeneficiaries(beneficiary, { signInResponse: List<NoebsBeneficiary>   ->
        run { println(signInResponse[3].data) }
    }, { objectReceived: TutiResponse?, _: Exception? ->
        run {
            println(objectReceived.toString())
        }
    })
}